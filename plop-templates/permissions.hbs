// Permiss√µes para {{modelName}} - {{resourceName}}
// Padr√£o: resource:action
// Execute este arquivo diretamente: node prisma/permissions_{{modelLower}}.js

import { PrismaClient } from '@prisma/client'

const prisma = new PrismaClient()

const {{modelUpper}}_PERMISSIONS = [
	{
		identifier: '{{modelPlural}}:create',
		name: 'Criar {{resourceName}}',
		category: '{{modelPlural}}'
	},
	{
		identifier: '{{modelPlural}}:read',
		name: 'Visualizar {{resourceName}}',
		category: '{{modelPlural}}'
	},
	{
		identifier: '{{modelPlural}}:update',
		name: 'Atualizar {{resourceName}}',
		category: '{{modelPlural}}'
	},
	{
		identifier: '{{modelPlural}}:delete',
		name: 'Deletar {{resourceName}}',
		category: '{{modelPlural}}'
	}
]

async function seedPermissions() {
	try {
		console.log(`üîê Criando/Atualizando permiss√µes de {{resourceName}}...`)
		
		for (const permission of {{modelUpper}}_PERMISSIONS) {
			await prisma.permission.upsert({
				where: { identifier: permission.identifier },
				update: {
					name: permission.name,
					category: permission.category
				},
				create: {
					identifier: permission.identifier,
					name: permission.name,
					category: permission.category
				}
			})
		}
		
		console.log(`‚úÖ Permiss√µes de {{resourceName}} criadas/atualizadas com sucesso!`)
	} catch (error) {
		console.error(`‚ùå Erro ao criar/atualizar permiss√µes:`, error)
		process.exit(1)
	} finally {
		await prisma.$disconnect()
	}
}

seedPermissions()

export const {{modelUpper}}_PERMISSIONS_EXPORT = {{modelUpper}}_PERMISSIONS
